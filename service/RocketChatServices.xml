    <!-- Rocket.Chat集成服务 -->
    <service verb="process" noun="RocketChatWebhook">
        <description>处理来自Rocket.Chat的Webhook消息</description>
        <in-parameters>
            <parameter name="text"/>
            <parameter name="user" type="Map"/>
            <parameter name="channel" type="Map"/>
            <parameter name="timestamp"/>
            <parameter name="messageId"/>
        </in-parameters>
        <out-parameters>
            <parameter name="success"/>
            <parameter name="sessionId"/>
            <parameter name="intent"/>
            <parameter name="action"/>
            <parameter name="messageSent"/>
            <parameter name="error"/>
        </out-parameters>
        <actions>
            <script location="component://moqui-mcp/src/main/groovy/RocketChatServices.groovy#processRocketChatWebhook"/>
        </actions>
    </service>

    <!-- 发送消息到Rocket.Chat -->
    <service verb="send" noun="RocketChatMessage">
        <description>发送消息到指定的Rocket.Chat频道</description>
        <in-parameters>
            <parameter name="channelId" required="true"/>
            <parameter name="message" required="true"/>
            <parameter name="username"/>
        </in-parameters>
        <out-parameters>
            <parameter name="success"/>
            <parameter name="channelId"/>
            <parameter name="message"/>
            <parameter name="sent"/>
            <parameter name="error"/>
        </out-parameters>
        <actions>
            <script location="component://moqui-mcp/src/main/groovy/RocketChatServices.groovy#sendMessageToRocketChat"/>
        </actions>
    </service>

    <!-- 获取Rocket.Chat集成状态 -->
    <service verb="get" noun="RocketChatStatus">
        <description>检查Rocket.Chat集成状态和配置</description>
        <out-parameters>
            <parameter name="success"/>
            <parameter name="configured"/>
            <parameter name="rocketchatUrl"/>
            <parameter name="botUsername"/>
            <parameter name="status"/>
            <parameter name="error"/>
        </out-parameters>
        <actions>
            <script location="component://moqui-mcp/src/main/groovy/RocketChatServices.groovy#getRocketChatStatus"/>
        </actions>
    </service>

    <!-- 发送marketplace通知 -->
    <service verb="send" noun="MarketplaceNotification">
        <description>通过Rocket.Chat发送marketplace通知</description>
        <in-parameters>
            <parameter name="userId" required="true"/>
            <parameter name="notificationType" required="true"/>
            <parameter name="matchId"/>
            <parameter name="productName"/>
            <parameter name="matchScore"/>
            <parameter name="contactName"/>
            <parameter name="orderId"/>
            <parameter name="status"/>
            <parameter name="message"/>
        </in-parameters>
        <out-parameters>
            <parameter name="success"/>
            <parameter name="userId"/>
            <parameter name="notificationType"/>
            <parameter name="message"/>
            <parameter name="channelId"/>
            <parameter name="sent"/>
            <parameter name="error"/>
        </out-parameters>
        <actions>
            <script location="component://moqui-mcp/src/main/groovy/RocketChatServices.groovy#sendMarketplaceNotification"/>
        </actions>
    </service>